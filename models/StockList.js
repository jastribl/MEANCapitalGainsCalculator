// Generated by CoffeeScript 1.9.3
(function() {
  var StockList, db, stockListTable;

  db = require('../utilities/DB');

  stockListTable = db.get('stocklist');

  StockList = {
    getStockListOrdered: function() {
      return stockListTable.find({}, {
        sort: {
          stockName: 1
        }
      }, function(err, stockList) {
        if (err) {
          throw err;
        }
        return stockList;
      });
    },
    getStockByName: function(stockName) {
      return stockListTable.findOne({
        stockName: stockName
      }, function(err, initialValues) {
        if (err) {
          throw err;
        }
        return initialValues;
      });
    },
    doesStockWithNameExist: function(stockName) {
      return stockListTable.count({
        'stockName': stockName
      }).then(function(count) {
        return count !== 0;
      });
    },
    addStock: function(stock) {
      return stockListTable.insert(stock);
    },
    removeStock: function(stock) {
      return stockListTable.remove({
        stockName: stock.stockName
      });
    }
  };

  module.exports = StockList;

}).call(this);
